---
title: "Define Steady State"
weight: 10
chapter: false
draft: false
---

### Define Steady State

The demo application provides an API to show the product information page of the shopping mall. If it takes a long time to show the product information page, users are more likely to leave the site.
Also, if an error occurs intermittently, it will have a fatal impact on the user's experience.

Therefore, we define the steady state of the demo system as follows. 

* **The response time of product inquiry API - less than 1 second based on p90**
* **The error rate of product inquiry API - less than 0.5 percent**

### Check the steady state in CloudWatch

First, go to the CloudWatch menu in the AWS console. 
![image](/images/20_ec2/steady-state_01.png)

Check the two alarms in the **Recent alarms** and click the **View recent alarms dashboard** link. 
![image](/images/20_ec2/steady-state_02.png)

In the screen below, click the **View in metrics** and **View in alarms** links in the ... menu at the top right of chaosTargetResponseAlaram to check the contents. 
![image](/images/20_ec2/steady-state_03.png)

TargetResponseTime is a metric generated by the load balancer connected to the product-composite service that provides the product query API. 
An alarm is set to occur when the p90 metric of TargetResponseTime exceeds 1 second.
![image](/images/20_ec2/steady-state_05.png)
![image](/images/20_ec2/steady-state_04.png)

Go back to the recent alarms dashboard and click the **View in metrics** and **View in alarms** links in the ... menu at the top right of chaosErrorRateAlarm in the screen below to check the contents.
![image](/images/20_ec2/steady-state_06.png)

The error rate is calculated based on the HTTPCode_ELB_5XX_Count, HTTPCode_ELB_4XX_Count, and RequestCount metrics of the load balancer connected to the product-composite service that provides the product inquiry API. 
An alarm is set to occur when the metric of error rate exceeds 0.5 percent.

By combining these metrics, we can create a new metric and monitor it. 
![image](/images/20_ec2/steady-state_07.png)
![image](/images/20_ec2/steady-state_08.png)

**The important thing here is to identify and monitor the steady state that better aligns with our business goals, not just monitoring simple metrics like CPU, memory, and response time.** 